<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ansible | Yet another tech blog</title><meta name=keywords content><meta name=description content="Blog technique sur le développement, DevOps et Linux"><meta name=author content="Cyrille Sondag"><link rel=canonical href=https://cyrillesondag.github.io/tags/ansible/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://cyrillesondag.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cyrillesondag.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cyrillesondag.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://cyrillesondag.github.io/apple-touch-icon.png><link rel=mask-icon href=https://cyrillesondag.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://cyrillesondag.github.io/tags/ansible/index.xml title=rss><link rel=alternate hreflang=en href=https://cyrillesondag.github.io/tags/ansible/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://cyrillesondag.github.io/tags/ansible/"><meta property="og:site_name" content="Yet another tech blog"><meta property="og:title" content="Ansible"><meta property="og:description" content="Blog technique sur le développement, DevOps et Linux"><meta property="og:locale" content="fr-fr"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ansible"><meta name=twitter:description content="Blog technique sur le développement, DevOps et Linux"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://cyrillesondag.github.io/ accesskey=h title="Yet another tech blog (Alt + H)">Yet another tech blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://cyrillesondag.github.io/ title=Accueil><span>Accueil</span></a></li><li><a href=https://cyrillesondag.github.io/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://cyrillesondag.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://cyrillesondag.github.io/search/ title=Rechercher><span>Rechercher</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://cyrillesondag.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://cyrillesondag.github.io/tags/>Tags</a></div><h1>Ansible</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Ansible Molecule</h2></header><div class=entry-content><p>Molecule est un framework de test Ansible. Il permet en isolation de tester les roles (mais aussi les playbooks) Ansible.
C’est une réelle aide pour s’assurer de la non-régression mais également pour accélérer le processus de développement.
Init Donc d’abord pour commencer, nous allons créer un role vide et explorer la structure proposée par Molecule.
En explorant la commande init role on obtient le résultat suivant :
1 2 3 4 5 6 7 8 9 10 11 12 13 14 molecule init role --help Usage: molecule init role [OPTIONS] ROLE_NAME Initialize a new role for use with Molecule, namespace is required outside collections, like acme.myrole. Options: --dependency-name [galaxy] Name of dependency to initialize. (galaxy) -d, --driver-name [delegated|openstack|podman] Name of driver to initialize. (delegated) --lint-name [yamllint] Name of lint to initialize. (yamllint) --provisioner-name [ansible] Name of provisioner to initialize. (ansible) --verifier-name [ansible|testinfra] Name of verifier to initialize. (ansible) Ok donc créons notre nouveau rôle :
...</p></div><footer class=entry-footer><span title='2022-05-22 23:24:56 +0200 +0200'>22 May 2022</span>&nbsp;·&nbsp;<span>7 min</span>&nbsp;·&nbsp;<span>Cyrille Sondag</span></footer><a class=entry-link aria-label="post link to Ansible Molecule" href=https://cyrillesondag.github.io/blog/ansible-molecule/></a></article></main><footer class=footer><span>© {year}</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>